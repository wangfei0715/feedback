<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.assist.platform.model.User" table="adp_user" catalog="feedback">
        <id name="userid" type="java.lang.Integer">
            <column name="userid" />
            <generator class="identity" />
        </id>
        <property name="loginname" type="java.lang.String">
            <column name="loginname" length="30" />
        </property>
        <property name="username" type="java.lang.String">
            <column name="username" length="50" />
        </property>
        <property name="password" type="java.lang.String">
            <column name="password" length="50" />
        </property>
        <property name="email" type="java.lang.String">
            <column name="email" length="50" />
        </property>
        <property name="tel" type="java.lang.String">
            <column name="tel" length="20" />
        </property>
        <property name="createtime" type="java.util.Date">
            <column name="createtime" length="19" />
        </property>
        <property name="score" type="java.lang.String">
            <column name="score" length="20" />
        </property>
        <property name="isadmin" type="java.lang.Integer">
            <column name="isadmin" />
        </property>
        <property name="isdel" type="java.lang.Integer">
            <column name="isdel" />
        </property>
        <!-- 独立外键 property-ref: (可选) 指定关联类的属性名，这个属性将会和本类的主键相对应。如果没有指定，会使用对方关联类的主键。 -->
		<one-to-one name="userinfo" class="com.assist.platform.model.UserInfo" property-ref="user" cascade="all"/>
		<many-to-one name="group" class="com.assist.platform.model.Group" fetch="join">
            <column name="groupid" />
        </many-to-one>
        <many-to-one name="userrank" class="com.assist.platform.model.UserRank" fetch="join">
            <column name="rankid" />
        </many-to-one>		
		<!--  
			关联表外键对应多对多
			<bag name="类1对应属性名" table="关联表表名">
			<key column="关联表类1对应字段" property-ref="类1属性,对应关联表外键(关联表外键-左侧:关联表类1对应字段)" />
			<many-to-many column="关联表类2对应字段" class="类2全包路径"
			property-ref="类2属性,对应关联表外键" />
			</bag>
		-->
		<bag name="roles" table="adp_userrole" inverse="false" lazy="false">
			<key column="userid"/>
			<many-to-many column="roleid"
				class="com.assist.platform.model.Role"/>
		</bag>	
		<bag name="favorites" table="adp_favorite" inverse="false">
			<key column="favoriteid"/>
			<many-to-many column="messageid"
				class="com.assist.platform.model.Message"/>
		</bag>
        <bag name="replies" inverse="true">
            <key>
                <column name="userid" />
            </key>
            <one-to-many class="com.assist.platform.model.Reply" />
        </bag>
        <bag name="messages" inverse="true" order-by="modifytime desc" fetch="join" >
            <key>
                <column name="userid" />
            </key>
            <one-to-many class="com.assist.platform.model.Message" />
        </bag>
        <bag name="logs" inverse="true">
            <key>
                <column name="userid" />
            </key>
            <one-to-many class="com.assist.platform.model.Log" />
        </bag>
    </class>
</hibernate-mapping>
